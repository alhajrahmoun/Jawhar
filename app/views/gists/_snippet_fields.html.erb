<div class="nested-fields">
	<div class="input-field col s6">
        <%= f.text_field :name, placeholder: 'اسم الملف', class: 'validate' %>
    </div>

    <div class="input-field col s6">
        <%= f.text_area :code, data:{val: f.object_name[-21..-1][/\[.*?\]/]}, class: "snippets" %>
    </div>
    
	<%= link_to_remove_association 'حذف الملف', f, class: 'remove_fields existing btn wave-effect' %>
</div>

<script type="text/javascript">
	var value = $('.snippets').last().data('val');
    $('#gist_snippets_attributes_'+value+'_code').each(function() {
		var editor = CodeMirror.fromTextArea(this, {
		        lineNumbers : true,
		        matchBrackets : true
		    });
		});
</script>